function render(e){var t=getQueryParameters(),n=t.id;if(n){for(var a=!1,i=0;!a&&i<e.items.length;)e.items[i].id==n?a=!0:i++;if(a){var s=e.items[i],l=s.displayname,d=s.description,r=s.questions,o=s.price,c=s.listprice,m=s.quantityavailable,u=s.image,y=s.relateditems;s.id;try{document.getElementById("main-image").src="../images/"+u,document.getElementById("zoom-default").href="../images/"+u,document.getElementById("item-name").innerHTML=l,document.getElementById("item-price").innerHTML=o.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,"),document.getElementById("item-price").setAttribute("itemprop","price"),document.getElementById("item-price").setAttribute("content",o),document.getElementById("price-content").getElementsByClassName("before-price")[0].innerHTML="$"+c.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,"),m>0?(document.getElementsByClassName("disp-available")[0].style.display="inline",document.getElementsByClassName("available")[0].style.display="inline",document.getElementsByClassName("available")[0].setAttribute("itemprop","availability"),document.getElementsByClassName("available")[0].setAttribute("href","http://schema.org/InStock"),document.getElementById("add-cart").style.display="block"):(document.getElementsByClassName("disp-not-available")[0].style.display="inline",document.getElementsByClassName("not-available")[0].style.display="inline",document.getElementsByClassName("not-available")[0].setAttribute("itemprop","availability"),document.getElementsByClassName("not-available")[0].setAttribute("href","http://schema.org/OutOfStock"),document.getElementById("not-add-cart").style.display="block");for(var p="",i=0;i<d.length;i++)p+='<h4 class="demo_expandable'+i+' ch-expandable-trigger">'+d[i].title+'</h4><div class="ch-hide"><div>'+d[i].text+"</div></div>";var g=d.length;p=p?p:"<p>There is not avaialbe description.</p>",document.getElementById("description").innerHTML=p;for(var h,v="",i=0;i<r.length;i++)h=r[i].user?'<span class="bold"> - by '+r[i].user+"</span>":"",v+='<div class="ch-box-icon ch-box-help"><i class="ch-icon-help-sign"></i><span>'+r[i].question+"</span>"+h+"</div>",r[i].reply&&(v+='<div class="ch-box-icon ch-box-info"><i class="ch-icon-info-sign"></i><span>'+r[i].reply+"</span></div>");v=v?v:"<p>There are not questions right now.</p>",document.getElementById("questions").innerHTML=v;for(var f="<ul>",i=0;i<y.length;i++){var E=y[i].displayname.length>16?y[i].displayname.substr(0,16)+"...":y[i].displayname;f+='<li><a href="/product-page.html?id='+y[i].id+'"><img class="related-item"  src="images/'+y[i].image+'"></img><p class="name-related">'+E+'</p><p class="price-related">$'+y[i].price.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")+"</p></a></li>"}document.getElementById("related-items").getElementsByClassName("ch-carousel")[0].innerHTML=f+"</ul>",events(e,s,g)}catch(e){console.log(e)}}else alert("This item is not longer available")}else alert("Select an item")}function events(e,t,n){var a=document.getElementsByClassName("demo-tabs");if(a.length){new ch.Tabs(ch(".demo-tabs")[0])}var i=document.getElementById("zoom-default");if(i){new ch.Zoom(ch("#zoom-default")[0])}var s=new ch.Bubble(ch("#more-button")[0],{content:"Quantity avaiable exceeded."}),l=new ch.Modal({hiddenby:"button"}),a=document.getElementsByClassName("demo-carousel");if(a){new ch.Carousel(ch(".demo-carousel")[0],{pagination:!0})}for(var d=[],r=0;r<n;r++)d.push(new ch.Expandable(document.querySelector(".demo_expandable"+r)));var o=document.getElementById("more-button"),c=document.getElementById("less-button"),m=document.getElementById("item-quantity"),u=document.getElementById("add-to-cart");o&&m&&o.addEventListener("click",function(){var e=parseInt(m.value);e?e<parseInt(t.quantityavailable)?m.value=e+1:(s.show(),s._options._hideDelay=2e3,s._hideTimer()):m.value=1}),c&&m&&c.addEventListener("click",function(){var e=parseInt(m.value);e?m.value=e-1<=0?1:e-1:m.value=1}),m&&m.addEventListener("change",function(){isInt(m.value)||(m.value=1)}),u&&m&&u.addEventListener("click",function(){var e=parseInt(m.value);if(e){var n=readCookie("cart");n?cartInstance=JSON.parse(n):cartInstance=[];for(var a=0,i=!1;!i&&a<cartInstance.length;)cartInstance[a].id==t.id?i=!0:a++;if(i)parseInt(cartInstance[a].quantity)+e<parseInt(t.quantityavailable)?(cartInstance[a].quantity=parseInt(cartInstance[a].quantity)+e,document.cookie="cart="+JSON.stringify(cartInstance),l.show('<i class="ch-icon-ok-sign left"></i><h2 class="left">Item added succesfully</h2>')):l.show('<i class="ch-icon-warning-sign left"></i><h2 class="left">Quantity exceeded</h2><p class="inblock">The quantity of this item that you have on your Cart plus this quantity exceed the quantity avaiable.</p>');else if(e<=parseInt(t.quantityavailable)){var s={displayname:t.displayname,image:t.image,price:t.price};cartInstance.push({id:t.id,quantity:e,item:s}),document.cookie="cart="+JSON.stringify(cartInstance),document.getElementById("quantity-cart")&&(document.getElementById("quantity-cart").innerHTML=cartInstance.length),l.show('<i class="ch-icon-ok-sign left"></i><h2 class="left">Item added succesfully</h2>')}else l.show('<i class="ch-icon-warning-sign left"></i><h2 class="left" >Quantity exceeded</h2><p class="inblock">The quantity that you selected exceed the quantity available.</p>')}else alert("Error, Quantity: "+e)}),document.getElementById("loader").style.display="none"}function isInt(e){return!isNaN(e)&&parseInt(Number(e))==e&&!isNaN(parseInt(e,10))}function getQueryParameters(){for(var e={},t=window.location.search.substring(1),n=t.split("&"),a=0;a<n.length;a++){var i=n[a].split("=");if("undefined"==typeof e[i[0]])e[i[0]]=decodeURIComponent(i[1]);else if("string"==typeof e[i[0]]){var s=[e[i[0]],decodeURIComponent(i[1])];e[i[0]]=s}else e[i[0]].push(decodeURIComponent(i[1]))}return e}function readCookie(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function readCookieHeader(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function drawCart(){var e=readCookieHeader("cart"),t=0;if(e){var n=JSON.parse(e);t=n.length,document.getElementById("quantity-cart").innerHTML=t;for(var a="",i=0,s=0;s<n.length;s++)a+='<tr><td><img class="cart-item" src="images/'+n[s].item.image+'"></td><td>'+n[s].item.displayname+"</td><td>"+n[s].quantity+"</td><td>$"+n[s].item.price.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")+"</td><td></td></tr>",i+=parseInt(n[s].quantity)*parseFloat(n[s].item.price);a+="<td>TOTAL:</td><td></td><td></td><td>$"+i.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")+'</td><td><input type="button" id="buy-now" class="ch-btn" value="Buy Now!"></td>',document.getElementById("body-cart")&&(document.getElementById("body-cart").innerHTML=a,document.getElementById("buy-now")&&document.getElementById("buy-now").addEventListener("click",function(){document.getElementById("loader").style.display="block",setTimeout(function(){document.getElementById("loader").style.display="none",document.getElementById("connection-error").style.display="block",setTimeout(function(){document.getElementById("connection-error").style.display="none"},3e3)},3e3)}))}else{var a="<td></td><td></td><td>Your Cart is empty.</td><td></td><td></td>";document.getElementById("body-cart")&&(document.getElementById("body-cart").innerHTML=a)}}function searchMeli(e){if(document.getElementById("search")){var t=document.getElementById("search").value;t&&(window.location="http://listado.mercadolibre.com.uy/"+t)}}function renderDeals(e){try{for(var t="<ul>",n=0;n<e.items.length;n++){var a=e.items[n].displayname.length>16?e.items[n].displayname.substr(0,16)+"...":e.items[n].displayname;t+='<li><a href="/product-page.html?id='+e.items[n].id+'"><img class="related-item"  src="images/'+e.items[n].image+'"></img><h3 class="name-related">'+a+'</h3><h3 class="price-related">$'+e.items[n].price.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")+"</h3></a></li>"}document.getElementById("deals-items").getElementsByClassName("ch-carousel")[0].innerHTML=t+"</ul>",eventsDeals(e)}catch(e){console.log(e)}}function eventsDeals(e){var t=document.getElementsByClassName("demo-carousel");if(t){new ch.Carousel(ch(".demo-carousel")[0],{pagination:!0})}}document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("item-info");if(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==XMLHttpRequest.DONE)if(200==t.status){console.log(JSON.parse(t.responseText));try{var e=JSON.parse(t.responseText);render(e)}catch(e){console.log("Formato incorrecto de API")}}else 400==t.status?alert("Error en Api"):alert("Error, status :"+t.status)},t.open("GET","/api/api.json",!0),t.send()}},!1),document.addEventListener("DOMContentLoaded",function(){if(drawCart(),document.getElementById("quantity-cart")){document.getElementById("clean-cart")&&document.getElementById("clean-cart").addEventListener("click",function(){document.cookie="cart=",document.getElementById("quantity-cart")&&(document.getElementById("quantity-cart").innerHTML=0),drawCart()});new ch.Modal(ch("#quantity-cart")[0],{content:document.querySelector("#cart-content")});document.getElementById("quantity-cart")&&document.getElementById("quantity-cart").addEventListener("click",function(){drawCart()}),drawCart()}document.getElementById("loader").style.display="none"},!1),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("deals-items");if(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==XMLHttpRequest.DONE)if(200==t.status){console.log(JSON.parse(t.responseText));try{var e=JSON.parse(t.responseText);renderDeals(e)}catch(e){console.log("Formato incorrecto de API")}}else 400==t.status?alert("Error en Api"):alert("Error, status :"+t.status)},t.open("GET","/api/api.json",!0),t.send()}},!1);